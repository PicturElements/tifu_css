@import "./utils.scss";
@import "./palette-settings.scss";

body {
	color: $pop-col;
	font-family: Segoe, "PT Sans", Arial, sans-serif;
	background: $body-back;
}

input,
textarea {
	font: inherit;
	outline: none;
	color: $pop-col;
}

.pretty-form input[type=text],
.pretty-form input[type=number],
.pretty-form input[type=password],
.pretty-form textarea,
input[type=url],
input[type=text],
input[type=number],
input[type=password],
input:not([type]),
.combined-search-page #search input[type=text],
textarea {
	box-sizing: border-box;
	border: 1px solid $pop-back-slightly-darker;
	@include swatch("pop");
	border-radius: $small-border-radius !important;
	text-indent: 0.25em;
	box-shadow: none;
	min-height: 2em;

	&:focus {
		border-color: $pop-back-darker;
	}
}

.pretty-form,
.roundfield {
	input[type=url],
	input[type=text],
	input[type=number],
	input[type=password],
	textarea {
		@include swatch("card");
	}
}

input[type=text]:focus {
	@include swatch("card");
}

input[type=checkbox],
input[type=radio] {
	position: relative;
	-webkit-appearance: none;
	-moz-appearance: none;
	display: inline-block;
	margin: 2px 5px 2px 0 !important;
	width: 15px !important;
	height: 15px !important;
	line-height: 16px;
	border-radius: $master-border-radius;
	box-shadow: inset 0 0 0 2px $pop-back-darker;
	vertical-align: -6px;
	cursor: pointer;

	&:checked {
		background: $pop-back-darker;
		box-shadow: none;
	}
}

input[type=radio]:checked {
	background: $pop-back-slightly-darker;
	box-shadow: inset 0 0 0 4px $pop-back-darker;
}

input[type=radio] {
	border-radius: 50%;
}

input[type=checkbox]:after {
	content: none;
}

input[type=checkbox]:checked:after {
	content: $checkbox-checked-icon;
	display: block;
	position: absolute;
	width: 100%;
	text-align: center;
	font-family: inherit;
	font-size: 13px;
	line-height: 16px;
	font-weight: bold;
	color: white;
	padding: 0;
}

select,
body.mod-toolbox select.tb-action-button {
	position: relative;
	-webkit-appearance: none;
	border: 1px solid $pop-back-slightly-darker;
	color: $pop-col-lighter;
	border-radius: $small-border-radius;
	@include swatch("card");
	height: 17px;
	padding: 0 6px 1px;
	min-width: 100px;
	outline: none;
	box-sizing: content-box;
}

select:focus {
	border-color: $pop-back-darker;
	opacity: 0.7;
}

label {
	color: $pop-col;
	cursor: pointer;
}

textarea {
	display: block;
	text-indent: 0 !important;
	padding: 5px 8px !important;

	&:focus {
		border-color: $pop-back-darker;
	}
}

hr {
	height: 1px;
	background: $body-back;
	border: none;
}

a,
.tagline a,
.search-result-meta a,
.md a {
	color: $a-col;
}

.hover-bubble {
	z-index: 10000;
	border: none;
	border-radius: $master-border-radius;
	box-shadow: 0 2px 2px 1px rgba(0,0,0,0.07);
	@include swatch("card");
	color: inherit;
}

.hover-bubble.multi-selector strong {
	color: inherit;
}

.hover-bubble:before,
.hover-bubble:after {
	pointer-events: none;
}

.hover-bubble.anchor-right:before {
	border-left-color: $body-back;
	margin-top: 1px;
}

.hover-bubble.anchor-right:after {
	border-left-color: $card-back;
}

.hover-bubble.anchor-top:before {
	border: none;
}

.hover-bubble.anchor-top:after {
	border-bottom-color: $card-back;
}

.hover-bubble.multi-selector {
	padding: 0 0 6px 0 !important;
}

.multi-selector .title {
	@include swatch("pop");
	padding: 5px;
	line-height: 1.1;
	border-radius: $master-border-radius $master-border-radius 0 0;
}

.hover-bubble.multi-selector .multi-list {
	margin-top: 7px;
}

/*.author-tooltip {
	@include swatch("pop");
}

.author-tooltip__head {
	background: inherit;
	@include swatch("card");
}*/

.multi-name {
	border: none !important;
	height: 25px;
	padding: 0 8px !important;
}

.hover-bubble.multi-selector label {
	padding: 4px 12px;
}

.hover-bubble.multi-selector label:hover {
	background: transparent;
}

.hover-bubble.multi-selector .throbber {
	top: 12px;
	right: 10px;
}

.throbber,
.flairthrobber,
.flairselector.active[style*="18px"] {
	position: relative;
	background: none;

	&:before,
	&:after {
		content: "";
		display: block;
		position: absolute;
		width: 100%;
		height: 100%;
		top: 0;
		left: 0;
		background: $throbber-col;
		border-radius: 20%;
		animation: tifu-throb 1s infinite;
	}

	&:after {
		animation-delay: -400ms !important;
	}
}

@keyframes tifu-throb {
	0% {
		transform: scale(0) rotate(0deg);
		opacity: 1;
	}

	50% {
		opacity: 0.5;
	}

	100% {
		transform: scale(1) rotate(90deg);
		opacity: 0;
	}
}

#beta-help {
	padding: 4px 4px;
	box-shadow: 2px 2px 2px rgba(0,0,0,0.07);
	transform: translate(-8px, 7px);
}

.debuginfo {
	height: 0;
}

.modal {
	z-index: 10005;
}

.modal-content {
	@include swatch("pop");
	border-radius: $master-border-radius !important;
	box-shadow: $modal-drop-shadow !important;
	border: none !important;
	overflow: hidden;
}

.modal-header {
	background: $pop-back !important;
}

.modal-header-title {
	color: $pop-col !important;
}

.modal a {
	color: $highlight-col !important;
}

.modal button {
	height: 30px;
	line-height: 28px;
	padding: 0 15px;
}

.modal-backdrop {
	opacity: 1 !important;
	background: $modal-shadow-back;
}

.save-preferences {
	position: absolute;
	bottom: 10px;
	right: 10px;
}

.lang-modal {
	.modal-content {
		padding-bottom: 25px;
	}
}

.report-modal {
	.report-form-bottom-panel {
		margin-top: 25px;
		height: 30px;
		line-height: 30px;
	}

	.report-reason-item {
		height: auto;
		margin: 15px 0;
	}
}

.report-reason-display {
	font-size: 14px !important;
	margin-left: 25px !important;
	color: $pop-col !important;
}

input:checked + .report-reason-display {
	font-weight: bold;
}

.report-form-block-user {
	border: 1px solid #eee;
	padding: 10px 15px;
	border-radius: $master-border-radius;
	margin-bottom: -30px;

	p {
		color: $pop-col-lighter !important;
	}
}

button,
.blueButton,
.RESHoverTitle .fancy-toggle-button a,
input[type="submit"],
.RESNotification .RESNotificationButtonBlue,
.res-search-tabs a,
.search-submit-button {
	height: 26px;
	display: inline-block;
	@include standard-btn;
	vertical-align: bottom;
	box-sizing: border-box;

	&[disabled] {
		background-color: $pop-back-darker;
		opacity: 0.8;
	}
}

input[type="file"] {
	cursor: pointer;
}

.flairdeletebtn {
	background: $alert-col-mild;
	color: white;
	margin-left: 0;
}

.flair-settings ~ .tabpane-content button[type=submit] {
	margin-right: 6px;
}

// For some reason SASS crashes if I try to make this prettier
button + button,
button + input[type="submit"],
input[type="submit"] + button,
input[type="submit"] + input[type="submit"] {
	margin-left: 6px;
}

// standard subdued buttons
body.mod-toolbox .tb-general-button,
body.mod-toolbox .tb-action-button:not(select),
body.mod-toolbox .tb-action-button.inline-button,
.pretty-button,
.RESSubscriptionButton,
.reported-stamp,
.title-button,
a.title-button.gold {
	display: inline-block;
	height: 20px;
	line-height: 20px;
	padding: 0 10px !important;
	border-radius: $small-border-radius !important;
	@include swatch("pop-s-darker");
	color: $subdued-btn-col !important;
	vertical-align: top;
	border: none !important;
	box-shadow: inset 0 -2px rgba(0, 0, 0, 0.1) !important;

	&:hover {
		@include swatch("body");
	}
}

// Subdued variation: gold button
a.title-button.gold,
a.title-button.gold:hover {
	@include swatch("report");
}

/*a.title-button.gold:hover {
	background: #f7e567;
}*/

// Faux modals (dropdowns)
.modtools .drop-choices {
	/*position: fixed;
	top: 50% !important;
	left: 50% !important;
	transform: translate(-50%,-50%);
	box-shadow: $modal-shadow, $modal-drop-shadow;
	border-radius: $master-border-radius;*/
	text-align: left;
	//z-index: 10000;

	/*.choice {
		padding: 6px 10px;

		&:hover {
			@include swatch("pop");
		}
	}*/
}

@mixin tabmenu {
	position: absolute;
	left: $side-gap;
	bottom: 0;
	margin: 0;
	height: 35px;
	overflow: hidden !important;
}

@mixin tabmenu-item {
	position: relative;
	float: left;
	height: 40px;
	margin: 0;
	overflow: hidden;
	margin-right: 1px !important;
}

@mixin tabmenu-shadow {
	content: "";
	display: block;
	position: absolute;
	left: -5px;
	bottom: 0;
	width: 100%;
	height: 3px;
	padding: 0 5px;
	box-shadow: 0 0 25px 5px rgba(113, 113, 113, 0.15);
}

@mixin tabmenu-link {
	display: block;
	height: 100%;
	@include swatch("card",true);
	color: $main-col !important;
	border: none !important;
	border-radius: $master-border-radius;
	padding: 0 15px !important;
	line-height: 30px !important;
	margin-top: 6px !important;
	font-weight: bold !important;
	font-size: 12px !important;
}

@mixin tabmenu-link-active {
	@include swatch("card",true);
	color: $highlight-col !important;
	margin-top: 0 !important;
	line-height: 35px !important;
	border: none;
	border-top: 2px solid $secondary-highlight-col !important;
}

.tabmenu {
	@include tabmenu;

	li {
		@include tabmenu-item;

		&:before {
			@include tabmenu-shadow;
		}

		&.selected:before {
			content: none;
		}

		a {
			@include tabmenu-link;
		}

		&.selected a {
			@include tabmenu-link-active;
		}
	}
}

.wiki-page .pageactions {
	height: 35px;
	border-radius: 0;
	overflow: hidden;

	.wikiaction {
		position: relative;
		margin: 0 1px 0 0;
		float: left;
		overflow: hidden;
		@include tabmenu-link;

		&:before {
			@include tabmenu-shadow;
		}

		&.wikiaction-current {
			@include tabmenu-link-active;

			&:before {
				content: none;
			}
		}
	}
}

.infobar,
.info-notice,
.submit_text {
	position: relative;
	border-radius: 3px;
	@include swatch("info");
	color: $info-col !important;
	padding: 8px 12px 8px 38px !important;
	border: none !important;
	line-height: 1.2;
	cursor: default;

	a {
		font-weight: bold;
		color: inherit;
	}
}

.error {
	display: block;
	padding: 7px 10px;
	background: $error-overlay;
	color: $alert-col;
	font-weight: bold;
	border-radius: $master-border-radius;
	font-size: 12px;

	&:empty {
		display: none;
	}

	a {
		color: inherit !important;
		font-weight: bold !important;
		opacity: 0.7;

		&:hover {
			opacity: 1;
		}
	}
}

.error,
.infobar,
.info-notice,
.submit_text {
	&:before {
		content: "!";
		display: inline-block;
		width: 16px;
		height: 16px;
		background: $alert-col;
		color: white !important;
		border-radius: 50%;
		text-align: center;
		vertical-align: middle;
		width: 17px;
		height: 17px;
		line-height: 18px;
		font-weight: 900;
		font-size: 13px;
		margin-right: 8px;
		text-shadow: 1px 1px rgba(0,0,0,0.15);
		box-shadow: inset -2px -2px rgba(0,0,0,0.15);
	}
}

.infobar,
.info-notice,
.submit_text {
	&:before {
		content: "i";
		position: absolute;
		top: 50%;
		left: 11px;
		margin-top: -8px;
		background: $highlight-col;
	}
}

.res-filterline-show-help:before,
.content[role=main] .help-hoverable:before {
	content: "i";
	display: inline-block;
	width: 16px;
	height: 16px;
	color: white;
	background: $highlight-col;
	text-align: center;
	border-radius: 50%;
	line-height: 18px;
	font-weight: 900;
	font-size: 13px;
	text-shadow: 1px 1px rgba(0,0,0,0.15);
	box-shadow: inset -2px -2px rgba(0,0,0,0.15);
}

.help-hoverable {
	font-size: 0;

	&:before {
		margin-left: 2px;
		vertical-align: -2px;
	}
}

.content[role=main] .help-hoverable:not(:hover):before {
	background: $pop-col-lighter;
	opacity: 0.7;
}

.flair,
.linkflairlabel {
	position: relative;
	overflow: hidden;
	border: none;
	height: 15px;
	vertical-align: middle;
	background-color: transparent;
	padding: 0 6px 0 21px;
	line-height: 16px;
	margin-left: 5px;
	cursor: default;
	max-width: initial;
	background: inherit;
	border-radius: $small-border-radius;
	color: $pop-col;
	z-index: 99;

	&:before {
		content: "";
		position: absolute;
		top: 1px;
		left: 6px;
		width: 14px;
		height: 14px;
		@include swatch("pop-s-darker");
		border-radius: $small-border-radius;
		transform: translateY(-0.5px) rotate(45deg);
		background-image: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.25) 20%, transparent 20%), url($palette-url);
		background-size: 100% 100%, get-palette-size();
		background-position-x: get-block("pop-s-darker");
		background-position-y: inherit;
		border-top-right-radius: 100%;
	}

	&:after {
		content: "";
		position: absolute;
		top: 0;
		left: 15px;
		width: 100%;
		height: 100%;
		@include swatch("pop-s-darker");
		z-index: -1;
	}
}

.linkflairlabel {
	margin-left: 0;

	.title ~ & {
		margin-left: 5px;
	}
}

// Raster
.preview img {
	background-position: 0 0, 6px 6px;
	background-size: 12px 12px;
	background-image: linear-gradient(45deg, #f9f9f9 25%, transparent 25%, transparent 75%, #f9f9f9 75%, #f9f9f9 100%), linear-gradient(45deg, #f9f9f9 25%, #eee 25%, #eee 75%, #f9f9f9 75%, #f9f9f9 100%);
}

// Clearfix
.stylesheet-customize-container {
	&:after {
		content: "";
		display: table;
		clear: left;
	}
}

// Close icon
.delete_sr_img-button .togglebutton,
.RESCloseButton:not(.RESFadeButton),
.guiders_x_button,
#search_hidemore,
.listingsignupbar__close,
.modal-header-close,
.flairremove {
	font-size: 0 !important;
	text-align: center;
	background: none;
	color: inherit;

	&:before {
		content: $cross-icon;
		cursor: pointer;
		font-size: 12px;
	}
}

.modal-header-close a {
	position: absolute;
	top: 0;
	left: 0;
	opacity: 0;
}

// Standard dropdowns
.dropdown {
	z-index: 200;
}

.res-filterline-dropdown,
#sr-drop-down,
.drop-choices:not(.flairselector),
.res-commentNavToggle-choices,
.RESMacroDropdown {
	display: block;
	@include swatch("card");
	box-shadow: inset 0 0 0 1px $body-back, 2px 2px 2px rgba(0, 0, 0, 0.02);
	padding-top: $dropdown-font-size + $dropdown-padding-tb * 2 !important;
	margin-top: -($dropdown-font-size + $dropdown-padding-tb + 1) !important;
	padding: 0;
	max-height: 0px;
	overflow: hidden;
	opacity: 0;
	border: none;
	cursor: pointer;
	transition: max-height 300ms, opacity 300ms, pointer-events 300ms;
	transition-delay: 0ms, 300ms, 300ms;
	border-radius: $master-border-radius;
	z-index: 199;
}

.drop-choices:not(.inuse) {
	cursor: inherit;
}

.res-commentNavToggle-choices {
	z-index: -1;
}

.res-filterline-preamble:hover .res-filterline-dropdown,
.res-commentNavToggle:hover .res-commentNavToggle-choices,
.drop-choices.inuse,
.RESMacroWrappingSpan .openMacro + span,
#sort-menu[style*="block"] {
	@include swatch("card");
	max-height: 250px;
	overflow: auto;
	opacity: 1;
	pointer-events: auto !important;
	transition-delay: 0ms;
}

// Dropdown items
.drop-choices a.choice,
.drop-choices:after, // See uber-cosmetic section below
.res-commentNavToggle-type,
.RESMacroDropdownList li a {
	display: block;
	position: relative;
	padding: $dropdown-padding-tb $dropdown-padding-lr;
	color: inherit !important;
	line-height: 1;
	padding: 5px 8px;
	font-size: $dropdown-font-size;
	font-weight: normal;
	box-sizing: border-box;
	cursor: pointer;
	border: none !important;
}

.drop-choices a.choice,	
.res-commentNavToggle-type,
.RESMacroDropdownList li a {
	&:hover {
		@include swatch("pop");
		opacity: 0.7;
		text-decoration: none;
	}
}

.drop-choices a.choice,
.res-commentNavToggle-type,
.RESMacroDropdownList li {
	&:first-child:before {
		content: "";
		position: absolute;
		top: 0;
		left: 5%;
		width: 90%;
		height: 1px;
		background: $body-back;
	}
}

.srdrop .choice.bottom-option {
	border: none;
	font-style: normal;
	font-weight: 600;
}

.dropdown.lightdrop .selected,
.res-commentNavToggle,
.RESMacroDropdownTitle {
	position: relative;
	background-image: none;
	font-size: $dropdown-font-size;
	color: inherit;
	line-height: 1;
	font-weight: bold;
	text-decoration: none;
	padding-left: 2px;
	padding-right: 0;
	white-space: nowrap;
	cursor: pointer;
	z-index: 100000;
}

.res-commentNavToggle:after {
	display: none;
}

.drop-choices.lightdrop {
	margin-left: -$dropdown-padding-lr + 2;
}

.res-commentNavToggle-choices {
	margin-left: -$dropdown-padding-lr;
}

.reddit-infobar {
	margin-top: 0;
}

// Uber-cosmetic stuff
.drop-choices:after {
	overflow: hidden;
	padding: 0 8px;
	height: 0;
}

.content > .menuarea .drop-choices:after {
	content: "past 24 hours";
}

.commentarea .menuarea .drop-choices:after {
	content: "controversial";
}